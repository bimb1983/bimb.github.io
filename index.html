<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Enjoy time">
<meta property="og:type" content="website">
<meta property="og:title" content="加菲猫">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="加菲猫">
<meta property="og:description" content="Enjoy time">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="加菲猫">
<meta name="twitter:description" content="Enjoy time">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>加菲猫</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <a href="https://github.com/bimb1983"><img width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">加菲猫</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-search">
          <a href="/search" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            搜索
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/11/dockerfile/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/11/dockerfile/" itemprop="url">dockerfile</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-11T15:37:31+08:00">
                2019-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong> Dockerfile 中最常用的指令</strong><br><strong>FROM</strong><br>指定 base 镜像  </p>
<p><strong>MAINTAINER</strong><br>设置镜像的作者，可以是任意字符串。  </p>
<p><strong>COPY</strong><br>将文件从 build context 复制到镜像。<br>COPY 支持两种形式：  </p>
<ol>
<li>COPY src dest  </li>
<li>COPY [“src”, “dest”]<br>src 只能指定 build context 中的文件或目录。如果dest在容器中不存在，会被自动创建</li>
</ol>
<p><strong>ADD</strong><br>与 COPY 类似，从 build context 复制文件到镜像。 不同的是，如果 src 是归档文件（tar, zip, tgz, xz 等），文件会被自动解压到 dest。</p>
<p><strong>ENV</strong><br>设置环境变量，环境变量可被后面的指令使用。例如：<br>ENV TZ=Asia/Shanghai<br>RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo $TZ &gt; /etc/timezone</p>
<p><strong>EXPOSE</strong><br>指定容器中的进程会监听的端口，Docker 可以将该端口暴露出来。</p>
<p><strong>VOLUME</strong><br>将文件或目录声明为 volume。<br>Dockerfile中的VOLUME每次运行一个新的container时，都会为其自动创建一个匿名的volume，如果需要在不同container之间共享数据，那么我们依然需要通过docker run -it -v my-volume:/foo的方式将/foo中数据存放于指定的my-volume中。</p>
<p><strong>WORKDIR</strong><br>为后面的 RUN, CMD, ENTRYPOINT, ADD 或 COPY 指令设置镜像中的当前工作目录。</p>
<p><strong>RUN</strong><br>在容器中运行指定的命令。</p>
<p><strong>CMD</strong><br>容器启动时运行指定的命令。<br>Dockerfile 中可以有多个 CMD 指令，但只有最后一个生效。CMD 可以被 docker run 之后的参数替换。</p>
<p><strong>ENTRYPOINT</strong><br>设置容器启动时运行的命令。<br>Dockerfile 中可以有多个 ENTRYPOINT 指令，但只有最后一个生效。 CMD 或 docker run 之后的参数会被当做参数传递给 ENTRYPOINT。</p>
<p><strong>RUN、CMD 和 ENTRYPOINT</strong>  </p>
<ol>
<li>RUN 执行命令并创建新的镜像层，RUN 经常用于安装软件包。  </li>
<li>CMD 设置容器启动后默认执行的命令及其参数，但 CMD 能够被 docker run 后面跟的命令行参数替换。  </li>
<li>ENTRYPOINT 配置容器启动时运行的命令。</li>
</ol>
<p>我们可用两种方式指定 RUN、CMD 和 ENTRYPOINT 要运行的命令：Shell 格式和 Exec 格式， 二者在使用上有细微的区别。</p>
<p>Shell 格式:</p>
<p>RUN apt-get install python3<br>CMD echo “Hello world”<br>ENTRYPOINT echo “Hello world”<br>当指令执行时，shell 格式底层会调用 /bin/sh -c <command></p>
<p>Exec 格式：</p>
<p>RUN [“apt-get”, “install”, “python3”]<br>CMD [“/bin/echo”, “Hello world”]<br>ENTRYPOINT [“/bin/echo”, “Hello world”]<br>当指令执行时，会直接调用 ，不会被 shell 解析。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/11/docker组成详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/11/docker组成详解/" itemprop="url">docker组成详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-11T14:39:32+08:00">
                2019-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>Docker 的核心组件包括：</strong>  </p>
<ol>
<li>Docker 客户端 - Client  </li>
<li>Docker 服务器 - Docker daemon  </li>
<li>Docker 镜像 - Image  </li>
<li>Docker 注册中心 - Registry  </li>
<li>Docker 容器 - Container（镜像的运行实例）</li>
</ol>
<p><strong>Docker 客户端</strong><br>最常用的 Docker 客户端是 docker 命令。通过 docker 我们可以方便地在 Host 上构建和运行容器。<br>除了 docker 命令行工具，也可以通过 socket 或 REST API 与远程的服务器通信。</p>
<p><strong>Docker 服务器</strong><br>Docker daemon 是服务器组件, 运行在Docker host上，负责创建、运行、监控容器，构建、存储镜像。</p>
<p><strong>Docker 镜像</strong><br>可将 Docker 镜像看着只读模板，通过它可以创建 Docker 容器。<br>例如某个镜像可能包含一个操作系统、一个 Apache HTTP Server 以及用户开发的 Web 应用。</p>
<p><strong>Docker 容器</strong><br>Docker 容器是 Docker 镜像的运行实例。<br>用户可以通过 CLI（docker）或是 API 启动、停止、移动或删除容器。 可以这么认为，对于应用软件，镜像是软件生命周期的构建和打包阶段，而容器则是启动和运行阶段。<br>镜像是 Docker 容器的基石，容器是镜像的运行实例，有了镜像才能启动容器。</p>
<p><strong>docker注册中心</strong><br>Registry 是存放 Docker 镜像的仓库，Registry 分私有和公有两种。<br>Docker Hub（<a href="https://hub.docker.com/）" target="_blank" rel="noopener">https://hub.docker.com/）</a> 是默认的 Registry，由 Docker 公司维护，上面有数以万计的镜像，用户可以自由下载和使用。<br>出于对速度或安全的考虑，用户也可以创建自己的私有 Registry。  </p>
<ol>
<li>docker pull 命令可以从 Registry 下载镜像。  </li>
<li>docker run 命令则是先下载镜像（如果本地没有），然后再启动容器。</li>
</ol>
<p><strong>容器启动过程</strong><br>通过例子来演示一下各个组件协作过程：<br>docker run -d -p 8020:80 httpd  </p>
<ol>
<li>Docker 客户端执行 docker run 命令。  </li>
<li>Docker daemon 发现本地没有 httpd 镜像。  </li>
<li>daemon 从 Docker Hub 下载镜像。  </li>
<li>下载完成，镜像 httpd 被保存到本地。  </li>
<li>Docker daemon 启动容器。</li>
</ol>
<p><strong>docker常用命令</strong>  </p>
<ol>
<li>docker images 查看到已经下载到本地的镜像  </li>
<li>docker ps 或者 docker container ls 显示正在运行的容器  </li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/31/OAuth2-0授权流程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/31/OAuth2-0授权流程/" itemprop="url">OAuth2.0授权流程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-31T15:32:36+08:00">
                2019-05-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/安全认证/" itemprop="url" rel="index">
                    <span itemprop="name">安全认证</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>OAuth（开放授权）是一个开放标准，允许用户让第三方应用访问该用户在某一网站上存储的资源，而无需将用户名和密码提供给第三方应用。</p>
<p>OAuth允许用户提供一个令牌，而不是用户名和密码来访问他们存放在特定服务提供者的数据。 每一个令牌授权一个特定的网站（例如，视频编辑网站)在特定的时段（例如，接下来的2小时内）内访问特定的资源（例如仅仅是某一相册中的视频）。 这样，OAuth让用户可以授权第三方网站访问他们存储在另外服务提供者的某些特定信息，而非所有内容。</p>
<p><strong>名词定义</strong>  </p>
<ol>
<li>Third-party application：第三方应用程序，本文中又称”客户端”（client），这里是业务运营系统。  </li>
<li>HTTP service：HTTP服务提供商，本文中简称”服务提供商”，比如GitHub。  </li>
<li>Resource Owner：资源所有者，本文中又称”用户”（user）。  </li>
<li>User Agent：用户代理，本文中就是指浏览器。  </li>
<li>Authorization server：认证服务器，即服务提供商专门用来处理认证的服务器。  </li>
<li>Resource server：资源服务器，即服务提供商存放用户生成的资源的服务器。它与认证服务器，可以是同一台服务器，也可以是不同的服务器。</li>
</ol>
<p><strong>客户端的授权模式</strong><br>客户端必须得到用户的授权（authorization grant），才能获得令牌（access token）。OAuth 2.0定义了四种授权方式：  </p>
<ol>
<li>授权码模式（authorization code）  </li>
<li>简化模式（implicit）  </li>
<li>密码模式（resource owner password credentials）  </li>
<li>客户端模式（client credentials）</li>
</ol>
<p><strong>授权码模式详细步骤</strong> </p>
<ol>
<li>用户访问客户端，后者将前者导向认证服务器。  </li>
<li>用户选择是否给予客户端授权。如果选”否”，整个授权流程结束。  </li>
<li>假设用户给予授权，认证服务器将用户导向客户端事先指定的”重定向URI”（redirection URI），同时附上一个授权码。  </li>
<li>客户端收到授权码，附上早先的”重定向URI”，向认证服务器申请令牌。  </li>
<li>认证服务器核对了授权码和”重定向URI”，确认无误后，向客户端发送访问令牌（access token）和更新令牌（refresh token）。</li>
</ol>
<p><strong>第1步详解</strong><br>用户访问客户端，后者将前者导向认证服务器。<br>客户端申请认证的URI，包含以下参数：  </p>
<ul>
<li>response_type：表示授权类型，必选项，此处的值固定为”code”  </li>
<li>client_id：表示客户端的ID，必选项  </li>
<li>redirect_uri：表示重定向URI，可选项  </li>
<li>scope：表示申请的权限范围，可选项  </li>
<li>state：表示客户端的当前状态，可以指定任意值（最好是随机字符串），认证服务器会原封不动地返回这个值，可防止CSRF攻击</li>
</ul>
<p><strong>第2步详解</strong><br>用户选择是否给予客户端授权。如果选”否”，整个授权流程结束。<br>这一步其实就是引导用户登录认证服务器，查看获取的权限列表，点击同意授权按钮。 比如某个博客网站使用了畅言评论，它支持微信、QQ登录：</p>
<p><strong>第3步详解</strong><br>假设用户给予授权，认证服务器将用户导向客户端事先指定的”重定向URI”（redirection URI），同时附上一个授权码。  </p>
<p>服务器回应客户端的URI，包含以下参数：  </p>
<ul>
<li>code：表示授权码，必选项。该码的有效期应该很短，通常设为10分钟，客户端只能使用该码一次， 否则会被授权服务器拒绝。该码与客户端ID和重定向URI，是一一对应关系。  </li>
<li>state：如果客户端的请求中包含这个参数，认证服务器的回应也必须一模一样包含这个参数。</li>
</ul>
<p><strong>第4步详解</strong><br>客户端收到授权码，附上早先的”重定向URI”，向认证服务器申请令牌。</p>
<p>客户端向认证服务器申请令牌的HTTP请求，包含以下参数：  </p>
<ul>
<li>grant_type：表示使用的授权模式，必选项，此处的值固定为”authorization_code”。</li>
<li>code：表示上一步获得的授权码，必选项。</li>
<li>redirect_uri：表示重定向URI，必选项，且必须与A步骤中的该参数值保持一致。</li>
<li>client_id：表示客户端ID，必选项。</li>
<li>client_secret: 表示客户端密钥，必选项。</li>
</ul>
<p><strong>第5步详解</strong><br>认证服务器核对了授权码和”重定向URI”，确认无误后，向客户端发送访问令牌（access token）和更新令牌（refresh token）。</p>
<p>认证服务器发送的HTTP回复，包含以下内容：  </p>
<ul>
<li>access_token：表示访问令牌，必选项。</li>
<li>token_type：表示令牌类型，该值大小写不敏感，必选项，可以是bearer类型或mac类型。</li>
<li>expires_in：表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。</li>
<li>refresh_token：表示更新令牌，用来获取下一次的访问令牌，可选项。</li>
<li>scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。</li>
</ul>
<p><strong>场景介绍</strong><br>一台业务运营系统服务、一台认证服务器，用户访问业务运营系统，详细步骤如下：  </p>
<ol>
<li>用户在浏览器端访问运营系统地址  </li>
<li>跳转到认证服务器登录地址，输入用户名和密码，并附上client_id、state、response_type、redirect_uri等参数  </li>
<li>认证服务器认证成功，将用户导向客户端事先指定的”重定向URI”（运营系统登录地址），同时附上一个授权码  </li>
<li>运营系统收到授权码，附上早先的”重定向URI”，向认证服务器申请令牌  </li>
<li>认证服务器核对了授权码和”重定向URI”，确认无误后，向客户端发送访问令牌（access token）和更新令牌（refresh token）</li>
</ol>
<p><a href="https://www.xncoding.com/2017/03/29/security/oauth2.html" target="_blank" rel="noopener">参考</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/30/nginx配置https/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/30/nginx配置https/" itemprop="url">nginx配置https</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-30T10:26:12+08:00">
                2019-05-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>https网站必须要有证书，这个证书可以自己生成，也可以从CA机构申请。<br><strong>生成SSL证书</strong><br>    sudo mkdir /etc/ssl/test<br>    sudo chmod 700 /etc/ssl/test<br>    sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/test/nginx-test.key -out /etc/ssl/certs/nginx-test.crt<br>这条命令会生成一个key文件和一个证书文件，这期间有很多问题让你填写，大部分都可以忽略，但是Common Name不能忽略，需要填写你的域名。  </p>
<p><strong>nginx配置ssl</strong><br>server {<br>    listen 443 http2 ssl;<br>    listen [::]:443 http2 ssl;</p>
<pre><code>server_name test.bimb.com;

ssl on;
ssl_certificate /etc/ssl/certs/nginx-test.crt;
ssl_certificate_key /etc/ssl/test/nginx-test.key;
ssl_session_timeout 5m;
ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
ssl_prefer_server_ciphers on;
</code></pre><p>}</p>
<p><strong>HTTP重定向到HTTPS</strong><br>想让别人访问你的网址的时候，无论什么方式访问，最后都是HTTPS。配置如下内容：<br>server {<br>        listen 80;<br>        server_name test.bimb.com;<br>        return 301 <a href="https://test.bimb.com$request_uri" target="_blank" rel="noopener">https://test.bimb.com$request_uri</a>;<br>}</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/25/mysql字符集问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/25/mysql字符集问题/" itemprop="url">mysql字符集问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-25T17:21:00+08:00">
                2019-05-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>执行mysql语句报错：Illegal mix of collations (utf8_unicode_ci,IMPLICIT) and (utf8_general_ci,IMPLICIT)  </p>
<p><strong>原因：</strong><br>两张表字段collation不匹配</p>
<p><strong>解决办法</strong><br>修改表字段字符集，保持2个表的字符集一致，修改方法：<br>     ALTER TABLE tablename CHANGE columnname columnname VARCHAR(200) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL; </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/24/表单重复提交/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/24/表单重复提交/" itemprop="url">表单重复提交</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-24T16:41:50+08:00">
                2019-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index">
                    <span itemprop="name">web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>重复提交的几个场景</strong><br><strong>场景一</strong><br>在网络延迟的情况下，用户多次点击提交按钮导致表单重复提交</p>
<p><strong>场景二</strong><br>表单提交后用户点击【刷新】按钮导致表单重复提交，点击浏览器的刷新按钮。</p>
<p><strong>场景三</strong><br>用户提交表单后，使用浏览器【后退】按钮重复之前的操作，导致重复提交表单。</p>
<p><strong>解决办法</strong><br><strong>JavaScript方案</strong><br>针对【场景一】，可通过javascript来防止表单重复提交，表单提交之后， 将提交按钮设置为不可用，让用户没有机会点击第二次提交按钮</p>
<p><strong>Session方案</strong><br>对于【场景二】和【场景三】导致表单重复提交的问题，客户端无法解决，需要在服务器端使用sessoin解决。</p>
<p>具体的做法：在服务器端生成一个Token(令牌)，同时在当前用户的Session域中保存这个Token。 然后将Token发送到客户端的Form表单中，在Form表单中使用隐藏域来存储这个Token， 表单提交的时候将这个Token一起提交到服务器端，然后在服务器端判断客户端提交上来的Token与服务器端生成的Token是否一致， 如果不一致，那就是重复提交了，此时服务器端就可以不处理重复提交的表单。如果相同则处理表单提交， 处理完后清除当前用户的Session域中存储的Token。</p>
<p>在下列情况下，服务器程序将拒绝处理用户提交的表单请求：</p>
<ol>
<li>存储Session域中的Token(令牌)与表单提交的Token(令牌)不同。</li>
<li>当前用户的Session中不存在Token(令牌)。</li>
<li>用户提交的表单数据中没有Token(令牌)。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/24/XSS攻击/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/24/XSS攻击/" itemprop="url">XSS攻击</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-24T10:46:47+08:00">
                2019-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网络安全/" itemprop="url" rel="index">
                    <span itemprop="name">网络安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>XSS攻击：跨站脚本攻击(Cross-Site Scripting)，XSS是一种常见的web安全漏洞，它允许攻击者将恶意代码植入到提供给其它用户使用的页面中。</p>
<p>这个是动态站点的威胁，静态站点完全不受其影响。</p>
<p><strong>XSS分类</strong><br><strong> 存储型XSS：</strong><br>    主要出现在让用户输入数据，供其他浏览此页的用户进行查看的地方，包括留言、评论、博客日志和各类表单等。<br>    应用程序从数据库中查询数据，在页面中显示出来，攻击者在相关页面输入恶意的脚本数据后，用户浏览此类页面时就可能受到攻击。<br>    这个流程简单可以描述为:恶意用户的Html输入Web程序-&gt;进入数据库-&gt;Web程序-&gt;用户浏览器。<br><strong>反射型XSS：</strong><br>    将脚本代码加入URL地址的请求参数里，请求参数进入程序后在页面直接输出，用户点击类似的恶意链接就可能受到攻击。  </p>
<p><strong>XSS目前主要的手段和目的如下：</strong></p>
<ul>
<li>盗用cookie，获取敏感信息。  </li>
<li>利用植入Flash，通过crossdomain权限设置进一步获取更高权限；或者利用Java等得到类似的操作。  </li>
<li>利用iframe、frame、XMLHttpRequest或上述Flash等方式，以（被攻击者）用户的身份执行一些管理动作， 或执行一些如:发微博、加好友、发私信等常规操作，前段时间新浪微博就遭遇过一次XSS。  </li>
<li>利用可被攻击的域受到其他域信任的特点，以受信任来源的身份请求一些平时不允许的操作，如进行不当的投票活动。  </li>
<li>在访问量极大的一些页面上的XSS可以攻击一些小型网站，实现DDoS攻击的效果  </li>
</ul>
<p><strong>XSS原理</strong><br>Web应用未对用户提交请求的数据做充分的检查过滤，允许用户在提交的数据中掺入HTML代码(最主要的是“&gt;”、“&lt;”)， 并将未经转义的恶意代码输出到第三方用户的浏览器解释执行，是导致XSS漏洞的产生原因。</p>
<p><strong>预防XSS</strong><br>不要相信用户的任何输入，并过滤掉输入中的所有特殊字符。这样就能消灭绝大部分的XSS攻击。</p>
<p>目前防御XSS主要有如下几种方式：</p>
<ul>
<li>过滤特殊字符<br>  避免XSS的方法之一主要是将用户所提供的内容进行过滤。  </li>
<li>使用HTTP头指定类型<br>  header.set(“Content-Type”,”text/javascript”)<br>这样就可以让浏览器解析javascript代码，而不会是html输出。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/24/CSRF攻击介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/24/CSRF攻击介绍/" itemprop="url">CSRF攻击介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-24T09:57:00+08:00">
                2019-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网络安全/" itemprop="url" rel="index">
                    <span itemprop="name">网络安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>CSRF是Cross Site Request Forgery的缩写，跨站请求伪造。   </p>
<p><strong>CSRF攻击</strong><br>从网站A中发起到网站B的请求，而这个请求是经过了伪装的，伪装目的是让请求看起来像是从网站B中发起的，也就是说，让B网站所在的服务器端误以为该请求是从自己网站发起的，而不是从A网站发起的。这种请求一般都是恶意的。<br>要理解为什么有CSRF攻击存在，先了解几个浏览器的跨域访问限制。  </p>
<p><strong>Cookie跨域</strong><br>cookie可以跨二级域名来访问，例如你在<a href="http://www.nb.com所在的web应用程序创建了一个cookie，" target="_blank" rel="noopener">www.nb.com所在的web应用程序创建了一个cookie，</a> 在ad.nb.com这样的二级域名对应的应用程序中可以访问，但是在创建cookie的时候需要指定Domain属性为nb.com。  </p>
<p><strong>JavaScript跨域</strong><br>通过js在不同的域之间进行数据传输或通信，比如用ajax向一个不同的域请求数据， 或者通过js获取页面中不同域的框架中(iframe)的数据。只要协议、域名、端口有任何一个不同，都被当作是不同的域。<br><img src="https://xnstatic-1253397658.file.myqcloud.com/csrf01.png" alt="js跨域">  </p>
<p><strong>通过jsonp跨域</strong><br>在js中，我们不可以用XMLHttpRequest请求不同域上的数据。 但是，在页面上引入不同域上的js脚本文件却是可以的，jsonp正是利用这个特性来实现的。</p>
<p>如果你的页面使用jquery，通过它封装的方法能很方便的来进行jsonp操作。 普通的jquery的ajax调用方法基本都采用这个方式，所以就可以调用不同域名实现的API了。</p>
<p>$.getJSON方法会自动判断是否跨域，不跨域的话，就调用普通的ajax方法； 跨域的话，则会以异步加载js文件的形式来调用jsonp的回调函数。</p>
<p><strong>CSRF攻击详解</strong><br>CSRF攻击是源于WEB的隐式身份验证机制！WEB的身份验证机制虽然可以保证一个请求是来自于某个用户的浏览器，但却无法保证该请求是用户批准发送的！</p>
<p>A网站访问B网站服务器的一些需要认证的资源的时候，如果没有Cookie信息，服务器是拒绝访问的，那么A网站就无法进行恶意操作。 而伪造成B网站的请求，就可以将B网站的Cookie一起发到B服务器，这个时候就服务器就认为该请求是合法的，就会给出正确的响应， 这个时候，A网站就达到目的了。</p>
<p><strong>例子</strong><br>假设有一个微博网站B，B有一个“加关注”的功能，即一个用户可以关注另一个用户， 而这个功能是这样的实现的：用户每次点击“加关注”按钮的时候，就会向服务器发送一个GET请求，URL如下：</p>
<pre><code>http://www.bdomain.com/addfriends?uid=123
</code></pre><p>URL中的参数uid表示的是你要关注的用户的ID。</p>
<p>在正常情况下，即你登录B网站后，点击“加关注”按钮，浏览器会将上面的URL连同B网站产生的Cookie一起发送到B网站的服务器， B服务器首先通过Cookie进行用户认证，如果Cookie中的信息正确，就会进行向数据库中写入记录，这样，你就成功关注了ID为123的用户。</p>
<p>假如我是一个恶意用户，我想让更多的人关注我，而我又不想通过正常的渠道去实现，因为毕竟正常渠道比较浪费时间， 于是我便开始想歪主意，碰巧，B网站的“加关注”的实现原理被我发现了。这个时候，我便进行了如下操作：</p>
<p>首先我在我自己的网站A里发了篇文章，文章中全是妖娆的美女图片，大家都喜欢美女嘛，所以就会有很多人来看我的这些美女， 我们知道，图片在网页中大都是通过<img scr="http://xxxx/xx.png">这样的形式实现的，图片加载的时候就会请求src中指定的URL， 而我就把众多美女图片的src写成了B博客里”加关注”的URL，不同的是将参数uid的值都写成了我在B网站中的ID（假设是456），即：</p>
<pre><code>http://www.bdomain.com/addfriends?uid=456
</code></pre><p>浏览器一看请求的域名是bdomain.com，便将存放在客户端的B网站的Cookie给顺带一起发了过去。</p>
<p><strong>CSRF攻击步骤</strong>  </p>
<ol>
<li>登录受信任网站A，并在本地生成Cookie。  </li>
<li>在不登出A的情况下，访问危险网站B。</li>
</ol>
<p><strong>CSRF的防御</strong><br>防御效果是从服务端着手效果比较好，现在一般的CSRF防御也都在服务端进行。<br><strong>Cookie Hashing</strong><br>所有表单都包含同一个伪随机值，这可能是最简单的解决方案了， 因为攻击者不能获得第三方的Cookie(理论上)，所以表单中的数据也就构造失败了。</p>
<p><a href="https://www.xncoding.com/2016/07/22/security/csrf.html" target="_blank" rel="noopener">转载自 https://www.xncoding.com/2016/07/22/security/csrf.html</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/14/memcache使用cas协议完成原子更新/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/14/memcache使用cas协议完成原子更新/" itemprop="url">memcache使用cas协议完成原子更新</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-14T17:01:29+08:00">
                2019-05-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Memcached通过cas协议实现原子更新，所谓cas就是compare and set。原理类似乐观锁，每次请求存储某个数据同时要附带一个cas值， memcached比对这个cas值与当前存储数据的cas值是否相等，如果相等就让新的数据覆盖老的数据，如果不相等就不更新，这在并发环境下特别有用。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/14/拦截器原理及使用场景/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/14/拦截器原理及使用场景/" itemprop="url">拦截器原理及使用场景</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-14T14:47:15+08:00">
                2019-05-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在springmvc项目中想对用户的请求进行拦截，只有登录用户才能访问资源,这时候可以使用到Spring的拦截器Intercepter;如果不是spring项目，可以使用Servlet Filter实现这个需求。  </p>
<p><strong>为什么使用拦截器</strong><br>一般我们会使用session来保存登录用户的信息，通过从session中取出保存的属性值来判断用户是否登录，如果我们在每个方法中都这样去判断就会有很多重复代码，将来我们想改动下逻辑，就得改动所有重复的判断方法。  </p>
<p>拦截器，可以在执行其他方法之前或将结果返回给客户端之前来执行其他逻辑，以下几种场景适合使用拦截器：  </p>
<ol>
<li>*记录请求日志  </li>
<li>*对请求进行统一的授权和验证  </li>
<li>*在请求方法执行前，对参数进行统一的处理，如解码、解密等  </li>
<li>*在数据返回给客户端前，对数据进行统一的处理，如压缩、加密等  </li>
<li>*修改返回内容，增加cookie、header等信息</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/155771927382939.gif" alt="bimb">
            
              <p class="site-author-name" itemprop="name">bimb</p>
              <p class="site-description motion-element" itemprop="description">Enjoy time</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">bimb</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash;  v5.1.4</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
