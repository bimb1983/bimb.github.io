<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Enjoy time">
<meta property="og:type" content="website">
<meta property="og:title" content="加菲猫">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="加菲猫">
<meta property="og:description" content="Enjoy time">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="加菲猫">
<meta name="twitter:description" content="Enjoy time">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>加菲猫</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <a href="https://github.com/bimb1983"><img width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">加菲猫</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-search">
          <a href="/search" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            搜索
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/18/docker部署mysql服务/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/18/docker部署mysql服务/" itemprop="url">docker部署mysql服务</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-18T15:23:27+08:00">
                2019-09-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/运维/" itemprop="url" rel="index">
                    <span itemprop="name">运维</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>1. MySQL部署</strong><br>1.1 拉取MySQL镜像<br>docker pull mysql:tag  </p>
<p>1.2 创建MySQL容器<br>docker run -d –name docker_mysql -p 3307:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql:tag  </p>
<p>1.3 进入mysql容器<br>1.3.1 普通模式进入<br>docker exec -it docker_mysql mysql -uroot -p123456<br>1.3.2 通过 bash 进入容器<br>docker exec -it mysql bash<br>mysql -uroot -p123455  </p>
<p>1.4 授权远程连接<br>    GRANT ALL ON <em>.</em> TO ‘root‘@’%’;<br>    flush privileges</p>
<p>1.5 更新root用户密码<br>    ALTER USER ‘root‘@’%’ IDENTIFIED WITH   mysql_native_password BY ‘123456’;<br>    flush privileges;  </p>
<p><strong>2. 修改mysql默认配置</strong><br>默认的配置文件是：/etc/mysql/my.cnf<br>默认的数据目录是：/var/lib/mysql  </p>
<p>2.1 通过 bash 进入容器，查看 my.cnf<br>docker exec -it docker_mysql bash<br>cat /etc/mysql/my.cnf<br>    !includedir /etc/mysql/conf.d/<br>    !includedir /etc/mysql/mysql.conf.d/<br>可以发现，主配置文件 my.cnf 加载了 /etc/mysql/conf.d 文件夹下所有的配置，如果我们要使用自己的配置文件，只需映射conf.d文件夹即可。</p>
<p>2.2 映射数据库目录和配置文件目录，启动mysql<br>docker run -d –name docker_mysql<br>-v E:\mysql\conf:/etc/mysql/conf.d<br>-v E:\mysql\data:/var/lib/mysql<br>-v E:\mysql\log:/var/log/mysql/<br>-p 3307:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7  </p>
<p>2.3 使用容器客户端连接<br>docker exec -it docker_mysql mysql -uroot -p123456</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/31/微信公众号开发-配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/31/微信公众号开发-配置/" itemprop="url">微信公众号开发-配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-31T09:00:00+08:00">
                2019-07-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/微信公众号/" itemprop="url" rel="index">
                    <span itemprop="name">微信公众号</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>ip白名单配置</strong><br>目的：<br>在IP白名单内的IP来源，获取access_token接口才可调用成功<br>配置方法：<br>登录公众平台-&gt;基本配置-&gt;IP白名单, 添加自己的ip  </p>
<p><strong>服务器配置</strong><br>目的：<br>填写接口配置信息，正确响应微信发送的Token验证<br>配置方法：<br>登录公众平台-&gt;基本配置-&gt;服务器配置，填写自己的用来验证微信发送的Token的服务器接口地址。  </p>
<p>该接口的get方法需要实现微信要求的token验证机制，验证通过后返回微信发送的随机字符串echostr；<br>新用户关注公众号或者老用户扫描公众号二维码，给公众号发消息，该接口的post方法会收到通知，收到通知后可以实现自己的业务逻辑，如果5秒内处理不完，需要先回复消息给微信。</p>
<p><strong>网页授权域名配置</strong><br>目的：<br>用户在网页授权页同意授权给公众号后，微信会将授权数据传给一个回调页面，回调页面需在此域名下，以确保安全可靠<br>配置方法：<br>登录公众平台-&gt;公众号设置-&gt;网页授权域名,将公众平台提供的文件上传至填写域名指向的web服务器（或虚拟主机）的目录（若填写域名，将文件放置在域名根目录下，例如wx.qq.com/MP_verify_Mpvve3JGYQHP7mbm.txt；若填写路径，将文件放置在路径目录下，例如wx.qq.com/mp/MP_verify_Mpvve3JGYQHP7mbm.txt），并确保可以访问。</p>
<p><strong>1 遇到的问题</strong><br><strong>1.1 微信token验证失败</strong><br>原因：<br>springmvc框架，校验通过后，返回微信发送的随机字符串echostr的时候，多了引号，例如微信发送的是123456，接口返回的是”123456”。<br>解决：<br>&lt;mvc:message-converters register-defaults=”true”&gt;节点下增加<br>   <code>&lt;bean class=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;/&gt;</code><br>并且要放在MappingJackson2HttpMessageConverter前面</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/05/html和jsp的区别/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/05/html和jsp的区别/" itemprop="url">html和jsp的区别</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-05T11:05:58+08:00">
                2019-07-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>概述</strong><br>如果app开发抛开原生，使用h5方式，html和jsp没有本质的区别，jsp最终还是转化成html在前端展示</p>
<p><strong>区别</strong><br>jsp可以直接通过${}标签获取后台返回的java对象，html需要通过ajax请求获取后台返回的json字符串数据，再加载到页面标签上。 </p>
<p>jsp是页面先加载数据，html+ajax是页面后加载数据.用html+ajax的方式后加载数据会让搜索引擎获取不到这些内容，你的页面能呈现的只是那些静态的内容，无论你ajax获取的数据有多不同，有多少个页面，对于搜索引擎来说那就是一个页面，因为呈现的内容是一样的。  </p>
<ol>
<li>在springMVC中返回是modelAndView的形式，将数据封装到model中，一般model中放置键值对的形式，值可以直接为对象本身，此时在jsp中${}可以直接获取  </li>
<li>如果使用html，在springMVC中需要返回实体，在方法上加注解@ResponseBody返回json字符串,然后在ajax中通过data获取json数据</li>
</ol>
<p><strong>jsp优缺点</strong><br><strong>优点</strong>  </p>
<ol>
<li>可被爬虫爬到</li>
<li>减少请求次数</li>
<li>不用考虑浏览器的兼容性<br><strong>缺点</strong>  </li>
<li>前端与后端未脱离，拖慢开发进度</li>
<li>依赖java运行环境</li>
</ol>
<p><strong>html优缺点</strong><br><strong>优点</strong>  </p>
<ol>
<li>开发过程中前端与后端脱离，交互通过JSON传输来实现</li>
<li>跨平台能力更强，依托于浏览器的支持</li>
<li>使后台数据接口能够得到复用<br><strong>缺点</strong>  </li>
<li>开发难度大，考虑浏览器的兼容性 </li>
<li>页面请求过多 </li>
<li>属于后加载，无法被爬虫爬到</li>
</ol>
<p><strong>使用jsp的痛点：</strong>  </p>
<ol>
<li>动态资源和静态资源全部耦合在一起，无法做到真正的动静分离。服务器压力大，因为服务器会收到各种http请求，例如css的http请求，js的，图片的，动态代码的等等。一旦服务器出现状况，前后台一起玩完，用户体验极差。</li>
<li>jsp必须要在支持java的web服务器里运行（例如tomcat等，无法使用nginx等（nginx据说单实例http并发高达5w，这个优势），性能提不上来。</li>
<li>第一次请求jsp，必须要在web服务器中编译成servlet，第一次运行会较慢。</li>
<li>每次请求jsp都是访问servlet再用输出流输出的html页面，效率没有直接使用html高。</li>
<li>如果jsp中的内容很多，页面响应会很慢，因为是同步加载。  </li>
</ol>
<p><strong>jsp请求方式：</strong>  </p>
<ol>
<li>客户端请求  </li>
<li>服务端的servlet或controller接收请求（路由规则由后端制定，整个项目开发的权重大部分在后端）  </li>
<li>调用service,dao代码完成业务逻辑<br>4.返回jsp<br>5.jsp展现一些动态的代码  </li>
</ol>
<p><strong>html请求方式：</strong></p>
<ol>
<li>浏览器发送请求  </li>
<li>直接到达html页面（路由规则由前端制定，整个项目开发的权重前移）  </li>
<li>html页面负责调用服务端接口产生数据（通过ajax等等）</li>
<li>填充html，展现动态效果。<br><strong>这样做的好处是：</strong><br>1.可以实现真正的前后端解耦，前端服务器使用nginx。<br>前端服务器放的是css，js，图片等等一系列静态资源（甚至你还可以css，js，图片等资源放到特定的文件服务器，例如阿里云的oss，并使用cdn加速），前端服务器负责控制页面引用，跳转，调用后端的接口，后端服务器使用tomcat。（这里需要使用一些前端工程化的框架比如nodejs，react，router，react，redux，webpack）<br>2.发现bug，可以快速定位是谁的问题，不会出现互相踢皮球的现象。<br>页面逻辑，跳转错误，浏览器兼容性问题，脚本错误，页面样式等问题，全部由前端工程师来负责。<br>接口数据出错，数据没有提交成功，应答超时等问题，全部由后端工程师来解决。<br>3.在大并发情况下，可以同时水平扩展前后端服务器，比如淘宝的一个首页就需要2000台前端服务器做集群来抗住日均多少亿+的日均pv。<br>4.减少后端服务器的并发压力，除了接口以外的其他所有http请求全部转移到前端nginx上。<br>5.即使后端服务暂时超时或者宕机了，前端页面也会正常访问，只不过数据刷不出来而已。<br>6.也许你也需要有微信相关的轻应用，那样你的接口完全可以共用，如果也有app相关的服务，那么只要通过一些代码重构，也可以大量复用接口，提升效率。<br>7.页面显示的东西再多也不怕，因为是异步加载。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/04/把一个已存在的springmvc项目上传到git服务器并部署到tomcat过程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/04/把一个已存在的springmvc项目上传到git服务器并部署到tomcat过程/" itemprop="url">把一个已存在的springmvc项目上传到git服务器并部署到tomcat过程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-04T15:04:48+08:00">
                2019-07-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/项目管理/" itemprop="url" rel="index">
                    <span itemprop="name">项目管理</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>项目上传到git服务器</strong>  </p>
<ol>
<li><strong>把项目导入到idea</strong>  </li>
<li><strong>创建git本地仓库</strong><br>使用idea的VCS-&gt;import into Version Control-&gt;Create Git Repository创建本地仓库；或者在项目根目录git bash here打开git命令窗口，执行git init创建本地仓库  </li>
<li><strong>关联远程仓库</strong><br>git remote add origin 远程地址  </li>
<li><strong>将全部文件加入git版本管理 .的意思是将当前文件夹下的全部文件放到版本管理中</strong><br>git add .  </li>
<li><strong>提交文件 使用-m 编写注释</strong><br>git commit -m “注释”  </li>
<li><strong>推送到远程分支</strong><br>git push</li>
</ol>
<p><img src="/images/git-add.png" alt="git上传步骤"></p>
<p><strong>项目部署到tomcat</strong>  </p>
<ol>
<li><strong>我是maven项目，使用maven命令打包</strong><br>maven clean package -DskipTests  </li>
<li><strong>把打包生成的war包放到tomcat服务器的webapps目录下</strong><br>如果要放到其它目录，修改host中的appBase或者context中的docBase    <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">host</span> <span class="attr">appBase</span>=<span class="string">"d:/aaa"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">"/smswap"</span> <span class="attr">reloadable</span>=<span class="string">"true"</span> <span class="attr">docBase</span>=<span class="string">"D:\workspace\smswap\WebRoot"</span>&gt;</span><span class="tag">&lt;/<span class="name">Context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>总结：<br>如果你想自己指定路径，那么应该在docBase里面<br>如果你想简单，那么直接把他们复制到appBase下面就行了  </p>
<ol start="3">
<li><strong>启动tomcat，就可以访问项目了</strong><br>如果启动脚本报权限不足，执行chmod +x *.sh  </li>
<li><p><strong>域名绑定</strong><br>如果要把已有的域名绑定到服务器的ip，在nginx配置server  </p>
<p> server {</p>
<pre><code>listen 80;
server_name credit.qa.look.com;
location / {
    proxy_redirect off;
            proxy_set_header HOST $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_pass http://192.168.1.196:8082;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection &quot;upgrade&quot;;
}
</code></pre><p> }</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/02/maven打包spring-boot项目遇到的问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/02/maven打包spring-boot项目遇到的问题/" itemprop="url">maven打包spring boot项目遇到的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-02T11:26:19+08:00">
                2019-07-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/项目构建/" itemprop="url" rel="index">
                    <span itemprop="name">项目构建</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><p><strong>问题1：</strong><br>zip64 archives are not supported<br><strong>原因</strong><br>spring boot项目打包最大文件数限制65535，由于项目中集成了vue源码文件，导致编译后的文件数量超过65535个，引起报错。<br><strong>解决办法</strong><br>maven打包的时候，resources目录下只打包编译后dist目录下的目标文件和其他配置文件,pom.xml文件build节点中增加如下配置  </p>
<p> <build></build></p>
<pre><code>&lt;resources&gt;
    &lt;resource&gt;
        &lt;directory&gt;src/main/resources&lt;/directory&gt;
        &lt;includes&gt;
            &lt;include&gt;*.yml&lt;/include&gt;
            &lt;include&gt;banner.txt&lt;/include&gt;
            &lt;include&gt;static/template/drainage/*.xls&lt;/include&gt;
            &lt;include&gt;static/regist/**&lt;/include&gt;
            &lt;include&gt;static/drainage/dist/**&lt;/include&gt;
        &lt;/includes&gt;
        &lt;filtering&gt;true&lt;/filtering&gt;
    &lt;/resource&gt;
&lt;/resources&gt;
</code></pre> <build> 


</build></li>
</ol>
<ol start="2">
<li><strong>问题2</strong><br>经过步骤1，spring boot项目打包并启动成功，但是读取excel文件报<br><code>Invalid header signature; read 0xE011BDBFEFBDBFEF, expected 0xE11AB1A1E011CFD0 - Your file appears not to be a valid OLE2 document</code><br><strong>原因</strong><br>使用了maven，而且为了配置profile，使用了resource，resource他会把它配置的路径下的文件过一遍，然后用pom定义的变量的值给替换掉，<br>excel不存在替换变量的问题，但应该会检查，打开的过程中出问题了<br><strong>解决办法</strong><br>pom.xml文件build节点中加入nonFilteredFileExtensions，如下：<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">nonFilteredFileExtensions</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">nonFilteredFileExtension</span>&gt;</span>xls<span class="tag">&lt;/<span class="name">nonFilteredFileExtension</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">nonFilteredFileExtensions</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/27/集成maven和Spring-boot的profile功能/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/27/集成maven和Spring-boot的profile功能/" itemprop="url">集成maven和Spring boot的profile功能</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-27T10:35:37+08:00">
                2019-06-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring-boot/" itemprop="url" rel="index">
                    <span itemprop="name">Spring boot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一般在开发项目的时候有多个环境，如开发环境、测试环境、生产环境，对应的配置文件一般不同。当我们要向各个环境发布程序时，如果人工处理这些配置文件，麻烦且易错。有了profile，只要在maven打包时使用下面命令即可<br><code>mvn clean package -DskipTests -Pprod</code>  </p>
<p>-Pprod 就是告诉maven要使用名字为prod的profile来打包，即所有的配置文件都使用生产环境（prod是自己定义的，在这里自定义为生产环境）</p>
<p><strong>配置方法</strong>  </p>
<ul>
<li>在application.properties文件中指定spring.profiles.active=@profileActive@  </li>
<li>maven pom.xml文件配置profiles属性  </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;profiles&gt;</span><br><span class="line">        &lt;profile&gt;</span><br><span class="line">            &lt;id&gt;qa&lt;/id&gt;</span><br><span class="line">            &lt;properties&gt;</span><br><span class="line">                &lt;profileActive&gt;qa&lt;/profileActive&gt;</span><br><span class="line">            &lt;/properties&gt;</span><br><span class="line">        &lt;/profile&gt;</span><br><span class="line">        &lt;profile&gt;</span><br><span class="line">            &lt;id&gt;dev&lt;/id&gt;</span><br><span class="line">            &lt;activation&gt;</span><br><span class="line">                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;</span><br><span class="line">            &lt;/activation&gt;</span><br><span class="line">            &lt;properties&gt;</span><br><span class="line">                &lt;profileActive&gt;dev&lt;/profileActive&gt;</span><br><span class="line">            &lt;/properties&gt;</span><br><span class="line">        &lt;/profile&gt;</span><br><span class="line">        &lt;profile&gt;</span><br><span class="line">            &lt;id&gt;prod1&lt;/id&gt;</span><br><span class="line">            &lt;properties&gt;</span><br><span class="line">                &lt;profileActive&gt;prod1&lt;/profileActive&gt;</span><br><span class="line">            &lt;/properties&gt;</span><br><span class="line">        &lt;/profile&gt;</span><br><span class="line">        &lt;profile&gt;</span><br><span class="line">            &lt;id&gt;prod2&lt;/id&gt;</span><br><span class="line">            &lt;properties&gt;</span><br><span class="line">                &lt;profileActive&gt;prod2&lt;/profileActive&gt;</span><br><span class="line">            &lt;/properties&gt;</span><br><span class="line">        &lt;/profile&gt;</span><br><span class="line">        &lt;profile&gt;</span><br><span class="line">            &lt;id&gt;stage&lt;/id&gt;</span><br><span class="line">            &lt;properties&gt;</span><br><span class="line">                &lt;profileActive&gt;stage&lt;/profileActive&gt;</span><br><span class="line">            &lt;/properties&gt;</span><br><span class="line">        &lt;/profile&gt;</span><br><span class="line">    &lt;/profiles&gt;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/13/mysql 结果集0和null的区别/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/13/mysql 结果集0和null的区别/" itemprop="url">mysql 结果集0和null的区别</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-13T12:01:36+08:00">
                2019-06-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据库/" itemprop="url" rel="index">
                    <span itemprop="name">数据库</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>如果数据库不存在满足条件的数据，返回的结果为空<br>    <code>SELECT 1 FROM loan l  WHERE 1=2</code></p>
<p>如果数据库不存在满足条件的数据，用count函数统计出来的结果是0<br>    <code>SELECT COUNT(*) FROM loan l  WHERE 1=2</code></p>
<p>如果数据库不存在满足条件的数据，用count函数统计出来的结果再用group by分组函数，出来的结果是空<br>    <code>SELECT COUNT(*) FROM loan l  WHERE 1=2 GROUP BY l.customerId</code></p>
<p>在比较的时候，空结果集要跟null比较，不能跟0做比较。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/11/dockerfile/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/11/dockerfile/" itemprop="url">dockerfile</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-11T15:37:31+08:00">
                2019-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong> Dockerfile 中最常用的指令</strong><br><strong>FROM</strong><br>指定 base 镜像  </p>
<p><strong>MAINTAINER</strong><br>设置镜像的作者，可以是任意字符串。  </p>
<p><strong>COPY</strong><br>将文件从 build context 复制到镜像。<br>COPY 支持两种形式：  </p>
<ol>
<li>COPY src dest  </li>
<li>COPY [“src”, “dest”]<br>src 只能指定 build context 中的文件或目录。如果dest在容器中不存在，会被自动创建</li>
</ol>
<p><strong>ADD</strong><br>与 COPY 类似，从 build context 复制文件到镜像。 不同的是，如果 src 是归档文件（tar, zip, tgz, xz 等），文件会被自动解压到 dest。</p>
<p><strong>ENV</strong><br>设置环境变量，环境变量可被后面的指令使用。例如：<br>ENV TZ=Asia/Shanghai<br>RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo $TZ &gt; /etc/timezone</p>
<p><strong>EXPOSE</strong><br>指定容器中的进程会监听的端口，Docker 可以将该端口暴露出来。</p>
<p><strong>VOLUME</strong><br>将文件或目录声明为 volume。<br>Dockerfile中的VOLUME每次运行一个新的container时，都会为其自动创建一个匿名的volume，如果需要在不同container之间共享数据，那么我们依然需要通过docker run -it -v my-volume:/foo的方式将/foo中数据存放于指定的my-volume中。</p>
<p><strong>WORKDIR</strong><br>为后面的 RUN, CMD, ENTRYPOINT, ADD 或 COPY 指令设置镜像中的当前工作目录。</p>
<p><strong>RUN</strong><br>在容器中运行指定的命令。</p>
<p><strong>CMD</strong><br>容器启动时运行指定的命令。<br>Dockerfile 中可以有多个 CMD 指令，但只有最后一个生效。CMD 可以被 docker run 之后的参数替换。</p>
<p><strong>ENTRYPOINT</strong><br>设置容器启动时运行的命令。<br>Dockerfile 中可以有多个 ENTRYPOINT 指令，但只有最后一个生效。 CMD 或 docker run 之后的参数会被当做参数传递给 ENTRYPOINT。</p>
<p><strong>RUN、CMD 和 ENTRYPOINT</strong>  </p>
<ol>
<li>RUN 执行命令并创建新的镜像层，RUN 经常用于安装软件包。  </li>
<li>CMD 设置容器启动后默认执行的命令及其参数，但 CMD 能够被 docker run 后面跟的命令行参数替换。  </li>
<li>ENTRYPOINT 配置容器启动时运行的命令。</li>
</ol>
<p>我们可用两种方式指定 RUN、CMD 和 ENTRYPOINT 要运行的命令：Shell 格式和 Exec 格式， 二者在使用上有细微的区别。</p>
<p>Shell 格式:</p>
<p>RUN apt-get install python3<br>CMD echo “Hello world”<br>ENTRYPOINT echo “Hello world”<br>当指令执行时，shell 格式底层会调用 /bin/sh -c <command></p>
<p>Exec 格式：</p>
<p>RUN [“apt-get”, “install”, “python3”]<br>CMD [“/bin/echo”, “Hello world”]<br>ENTRYPOINT [“/bin/echo”, “Hello world”]<br>当指令执行时，会直接调用 ，不会被 shell 解析。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/11/docker组成详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/11/docker组成详解/" itemprop="url">docker组成详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-11T14:39:32+08:00">
                2019-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>Docker 的核心组件包括：</strong>  </p>
<ol>
<li>Docker 客户端 - Client  </li>
<li>Docker 服务器 - Docker daemon  </li>
<li>Docker 镜像 - Image  </li>
<li>Docker 注册中心 - Registry  </li>
<li>Docker 容器 - Container（镜像的运行实例）</li>
</ol>
<p><strong>Docker 客户端</strong><br>最常用的 Docker 客户端是 docker 命令。通过 docker 我们可以方便地在 Host 上构建和运行容器。<br>除了 docker 命令行工具，也可以通过 socket 或 REST API 与远程的服务器通信。</p>
<p><strong>Docker 服务器</strong><br>Docker daemon 是服务器组件, 运行在Docker host上，负责创建、运行、监控容器，构建、存储镜像。</p>
<p><strong>Docker 镜像</strong><br>可将 Docker 镜像看着只读模板，通过它可以创建 Docker 容器。<br>例如某个镜像可能包含一个操作系统、一个 Apache HTTP Server 以及用户开发的 Web 应用。<br>镜像名字由两部分组成：repository 和 tag。如果执行 docker build 时没有指定 tag，会使用默认值 latest。<br>repository 的完整格式为：[registry-host]:[port]/[username]/xxx。只有 Docker Hub 上的镜像可以省略 [registry-host]:[port] 。<br>我们可以通过 docker tag 命令方便地给镜像打 tag  </p>
<ul>
<li>docker tag myimage-v1.9.1 myimage:1.9.1  </li>
<li>docker tag myimage-v1.9.1 myimage:latest</li>
</ul>
<p><strong>Docker 容器</strong><br>Docker 容器是 Docker 镜像的运行实例。<br>用户可以通过 CLI（docker）或是 API 启动、停止、移动或删除容器。 可以这么认为，对于应用软件，镜像是软件生命周期的构建和打包阶段，而容器则是启动和运行阶段。<br>镜像是 Docker 容器的基石，容器是镜像的运行实例，有了镜像才能启动容器。</p>
<p><strong>docker注册中心</strong><br>Registry 是存放 Docker 镜像的仓库，Registry 分私有和公有两种。<br>Docker Hub（<a href="https://hub.docker.com/）" target="_blank" rel="noopener">https://hub.docker.com/）</a> 是默认的 Registry，由 Docker 公司维护，上面有数以万计的镜像，用户可以自由下载和使用。<br>出于对速度或安全的考虑，用户也可以创建自己的私有 Registry。<br>Docker Hub 为了区分不同用户的同名镜像，镜像的 registry 中要包含用户名，完整格式为：[username]/xxx:tag    </p>
<ol>
<li>docker pull 命令可以从 Registry 下载镜像。  </li>
<li>docker run 命令则是先下载镜像（如果本地没有），然后再启动容器。  </li>
<li>docker push 将镜像上传到 Registry</li>
</ol>
<p><strong>容器启动过程</strong><br>通过例子来演示一下各个组件协作过程：<br>docker run -d -p 8020:80 httpd  </p>
<ol>
<li>Docker 客户端执行 docker run 命令。  </li>
<li>Docker daemon 发现本地没有 httpd 镜像。  </li>
<li>daemon 从 Docker Hub 下载镜像。  </li>
<li>下载完成，镜像 httpd 被保存到本地。  </li>
<li>Docker daemon 启动容器。</li>
</ol>
<p><strong>docker常用命令</strong>  </p>
<ol>
<li>docker images 查看到已经下载到本地的镜像  </li>
<li>docker ps 或者 docker container ls 显示正在运行的容器  </li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/31/OAuth2-0授权流程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bimb">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/155771927382939.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="加菲猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/31/OAuth2-0授权流程/" itemprop="url">OAuth2.0授权流程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-31T15:32:36+08:00">
                2019-05-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/安全认证/" itemprop="url" rel="index">
                    <span itemprop="name">安全认证</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>OAuth（开放授权）是一个开放标准，允许用户让第三方应用访问该用户在某一网站上存储的资源，而无需将用户名和密码提供给第三方应用。</p>
<p>OAuth允许用户提供一个令牌，而不是用户名和密码来访问他们存放在特定服务提供者的数据。 每一个令牌授权一个特定的网站（例如，视频编辑网站)在特定的时段（例如，接下来的2小时内）内访问特定的资源（例如仅仅是某一相册中的视频）。 这样，OAuth让用户可以授权第三方网站访问他们存储在另外服务提供者的某些特定信息，而非所有内容。</p>
<p><strong>名词定义</strong>  </p>
<ol>
<li>Third-party application：第三方应用程序，本文中又称”客户端”（client），这里是业务运营系统。  </li>
<li>HTTP service：HTTP服务提供商，本文中简称”服务提供商”，比如GitHub。  </li>
<li>Resource Owner：资源所有者，本文中又称”用户”（user）。  </li>
<li>User Agent：用户代理，本文中就是指浏览器。  </li>
<li>Authorization server：认证服务器，即服务提供商专门用来处理认证的服务器。  </li>
<li>Resource server：资源服务器，即服务提供商存放用户生成的资源的服务器。它与认证服务器，可以是同一台服务器，也可以是不同的服务器。</li>
</ol>
<p><strong>客户端的授权模式</strong><br>客户端必须得到用户的授权（authorization grant），才能获得令牌（access token）。OAuth 2.0定义了四种授权方式：  </p>
<ol>
<li>授权码模式（authorization code）  </li>
<li>简化模式（implicit）  </li>
<li>密码模式（resource owner password credentials）  </li>
<li>客户端模式（client credentials）</li>
</ol>
<p><strong>授权码模式详细步骤</strong> </p>
<ol>
<li>用户访问客户端，后者将前者导向认证服务器。  </li>
<li>用户选择是否给予客户端授权。如果选”否”，整个授权流程结束。  </li>
<li>假设用户给予授权，认证服务器将用户导向客户端事先指定的”重定向URI”（redirection URI），同时附上一个授权码。  </li>
<li>客户端收到授权码，附上早先的”重定向URI”，向认证服务器申请令牌。  </li>
<li>认证服务器核对了授权码和”重定向URI”，确认无误后，向客户端发送访问令牌（access token）和更新令牌（refresh token）。</li>
</ol>
<p><strong>第1步详解</strong><br>用户访问客户端，后者将前者导向认证服务器。<br>客户端申请认证的URI，包含以下参数：  </p>
<ul>
<li>response_type：表示授权类型，必选项，此处的值固定为”code”  </li>
<li>client_id：表示客户端的ID，必选项  </li>
<li>redirect_uri：表示重定向URI，可选项  </li>
<li>scope：表示申请的权限范围，可选项  </li>
<li>state：表示客户端的当前状态，可以指定任意值（最好是随机字符串），认证服务器会原封不动地返回这个值，可防止CSRF攻击</li>
</ul>
<p><strong>第2步详解</strong><br>用户选择是否给予客户端授权。如果选”否”，整个授权流程结束。<br>这一步其实就是引导用户登录认证服务器，查看获取的权限列表，点击同意授权按钮。 比如某个博客网站使用了畅言评论，它支持微信、QQ登录：</p>
<p><strong>第3步详解</strong><br>假设用户给予授权，认证服务器将用户导向客户端事先指定的”重定向URI”（redirection URI），同时附上一个授权码。  </p>
<p>服务器回应客户端的URI，包含以下参数：  </p>
<ul>
<li>code：表示授权码，必选项。该码的有效期应该很短，通常设为10分钟，客户端只能使用该码一次， 否则会被授权服务器拒绝。该码与客户端ID和重定向URI，是一一对应关系。  </li>
<li>state：如果客户端的请求中包含这个参数，认证服务器的回应也必须一模一样包含这个参数。</li>
</ul>
<p><strong>第4步详解</strong><br>客户端收到授权码，附上早先的”重定向URI”，向认证服务器申请令牌。</p>
<p>客户端向认证服务器申请令牌的HTTP请求，包含以下参数：  </p>
<ul>
<li>grant_type：表示使用的授权模式，必选项，此处的值固定为”authorization_code”。</li>
<li>code：表示上一步获得的授权码，必选项。</li>
<li>redirect_uri：表示重定向URI，必选项，且必须与A步骤中的该参数值保持一致。</li>
<li>client_id：表示客户端ID，必选项。</li>
<li>client_secret: 表示客户端密钥，必选项。</li>
</ul>
<p><strong>第5步详解</strong><br>认证服务器核对了授权码和”重定向URI”，确认无误后，向客户端发送访问令牌（access token）和更新令牌（refresh token）。</p>
<p>认证服务器发送的HTTP回复，包含以下内容：  </p>
<ul>
<li>access_token：表示访问令牌，必选项。</li>
<li>token_type：表示令牌类型，该值大小写不敏感，必选项，可以是bearer类型或mac类型。</li>
<li>expires_in：表示过期时间，单位为秒。如果省略该参数，必须其他方式设置过期时间。</li>
<li>refresh_token：表示更新令牌，用来获取下一次的访问令牌，可选项。</li>
<li>scope：表示权限范围，如果与客户端申请的范围一致，此项可省略。</li>
</ul>
<p><strong>场景介绍</strong><br>一台业务运营系统服务、一台认证服务器，用户访问业务运营系统，详细步骤如下：  </p>
<ol>
<li>用户在浏览器端访问运营系统地址  </li>
<li>跳转到认证服务器登录地址，输入用户名和密码，并附上client_id、state、response_type、redirect_uri等参数  </li>
<li>认证服务器认证成功，将用户导向客户端事先指定的”重定向URI”（运营系统登录地址），同时附上一个授权码  </li>
<li>运营系统收到授权码，附上早先的”重定向URI”，向认证服务器申请令牌  </li>
<li>认证服务器核对了授权码和”重定向URI”，确认无误后，向客户端发送访问令牌（access token）和更新令牌（refresh token）</li>
</ol>
<p><a href="https://www.xncoding.com/2017/03/29/security/oauth2.html" target="_blank" rel="noopener">参考</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/155771927382939.gif" alt="bimb">
            
              <p class="site-author-name" itemprop="name">bimb</p>
              <p class="site-description motion-element" itemprop="description">Enjoy time</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">23</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">bimb</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash;  v5.1.4</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
